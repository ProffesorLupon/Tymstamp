{"ast":null,"code":"import React,{useEffect,useState}from'react';import apiService from'../api/apiService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LeaveRequests=()=>{const[leaveRequests,setLeaveRequests]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{const getLeaveRequests=async()=>{setLoading(true);try{const response=await apiService.get('/manager/leave/pending-requests');setLeaveRequests(response.data);}catch(error){console.error(\"Failed to fetch leave requests:\",error);}finally{setLoading(false);}};getLeaveRequests();},[]);const handleApprove=async id=>{try{await apiService.post(`/manager/leave/requests/${id}/approve`);setLeaveRequests(prev=>prev.filter(req=>req.id!==id));alert('Request approved.');}catch(error){console.error('Failed to approve request:',error);alert('Could not approve request.');}};const handleReject=async id=>{const reason=prompt(\"Please provide a reason for rejection:\");if(!reason)return;try{await apiService.post(`/manager/leave/requests/${id}/reject`,{rejection_reason:reason});setLeaveRequests(prev=>prev.filter(req=>req.id!==id));alert('Request rejected.');}catch(error){console.error('Failed to reject request:',error);alert('Could not reject request.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"dashboard-header\",children:\"Manage Leave Requests\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading leave requests...\"}):/*#__PURE__*/_jsx(\"div\",{className:\"section\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-bordered\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Employee\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Leave Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Dates\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Reason\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:leaveRequests.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"6\",children:\"No pending leave requests.\"})}):leaveRequests.map(request=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:request.employee.user.name}),/*#__PURE__*/_jsx(\"td\",{children:request.leave_type}),/*#__PURE__*/_jsxs(\"td\",{children:[new Date(request.start_date).toLocaleDateString(),\" - \",new Date(request.end_date).toLocaleDateString()]}),/*#__PURE__*/_jsx(\"td\",{children:request.reason}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-warning\",children:request.status})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleApprove(request.id),className:\"btn btn-success btn-sm me-2\",children:\"Approve\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleReject(request.id),className:\"btn btn-danger btn-sm\",children:\"Reject\"})]})]},request.id))})]})})]});};export default LeaveRequests;","map":{"version":3,"names":["React","useEffect","useState","apiService","jsx","_jsx","jsxs","_jsxs","LeaveRequests","leaveRequests","setLeaveRequests","loading","setLoading","getLeaveRequests","response","get","data","error","console","handleApprove","id","post","prev","filter","req","alert","handleReject","reason","prompt","rejection_reason","className","children","length","colSpan","map","request","employee","user","name","leave_type","Date","start_date","toLocaleDateString","end_date","status","onClick"],"sources":["C:/Users/Tshepiso Selemela/OneDrive/Documents/Tymstamp/FrontEnd/my-app/src/pages/LeaveRequests.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport apiService from '../api/apiService';\r\n\r\nconst LeaveRequests = () => {\r\n  const [leaveRequests, setLeaveRequests] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const getLeaveRequests = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const response = await apiService.get('/manager/leave/pending-requests');\r\n        setLeaveRequests(response.data);\r\n      } catch (error) {\r\n        console.error(\"Failed to fetch leave requests:\", error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    getLeaveRequests();\r\n  }, []);\r\n\r\n  const handleApprove = async (id) => {\r\n    try {\r\n      await apiService.post(`/manager/leave/requests/${id}/approve`);\r\n      setLeaveRequests(prev => prev.filter(req => req.id !== id));\r\n      alert('Request approved.');\r\n    } catch (error) {\r\n      console.error('Failed to approve request:', error);\r\n      alert('Could not approve request.');\r\n    }\r\n  };\r\n\r\n  const handleReject = async (id) => {\r\n    const reason = prompt(\"Please provide a reason for rejection:\");\r\n    if (!reason) return;\r\n\r\n    try {\r\n      await apiService.post(`/manager/leave/requests/${id}/reject`, { rejection_reason: reason });\r\n      setLeaveRequests(prev => prev.filter(req => req.id !== id));\r\n      alert('Request rejected.');\r\n    } catch (error) {\r\n      console.error('Failed to reject request:', error);\r\n      alert('Could not reject request.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"dashboard\">\r\n      <h2 className=\"dashboard-header\">Manage Leave Requests</h2>\r\n      {loading ? (\r\n        <p>Loading leave requests...</p>\r\n      ) : (\r\n        <div className=\"section\">\r\n          <table className=\"table table-bordered\">\r\n            <thead>\r\n              <tr>\r\n                <th>Employee</th>\r\n                <th>Leave Type</th>\r\n                <th>Dates</th>\r\n                <th>Reason</th>\r\n                <th>Status</th>\r\n                <th>Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {leaveRequests.length === 0 ? (\r\n                <tr><td colSpan=\"6\">No pending leave requests.</td></tr>\r\n              ) : (\r\n                leaveRequests.map((request) => (\r\n                  <tr key={request.id}>\r\n                    <td>{request.employee.user.name}</td>\r\n                    <td>{request.leave_type}</td>\r\n                    <td>{new Date(request.start_date).toLocaleDateString()} - {new Date(request.end_date).toLocaleDateString()}</td>\r\n                    <td>{request.reason}</td>\r\n                    <td><span className=\"badge bg-warning\">{request.status}</span></td>\r\n                    <td>\r\n                      <button onClick={() => handleApprove(request.id)} className=\"btn btn-success btn-sm me-2\">Approve</button>\r\n                      <button onClick={() => handleReject(request.id)} className=\"btn btn-danger btn-sm\">Reject</button>\r\n                    </td>\r\n                  </tr>\r\n                ))\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LeaveRequests;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}